# ===========================
# 2Ô∏è‚É£ BUILD FRONTEND (React)
# ===========================
FROM node:20 AS frontend-build
WORKDIR /app

# Copy package.json tr∆∞·ªõc ƒë·ªÉ t·ªëi ∆∞u cache
COPY FE_React/package.json FE_React/package-lock.json ./

RUN npm install

# Copy to√†n b·ªô source code v√†o container
COPY FE_React/ ./

# Build React app (ƒë·∫ßu ra l√† th∆∞ m·ª•c /app/dist)
RUN npm run build

# ===========================
# 3Ô∏è‚É£ DEPLOY FRONTEND (Nginx)
# ===========================
FROM nginx:alpine AS frontend
WORKDIR /usr/share/nginx/html

# üü¢ Copy t·ª´ /app/dist thay v√¨ /app/build
COPY --from=frontend-build /app/dist . 

EXPOSE 8080
CMD ["nginx", "-g", "daemon off;"]
